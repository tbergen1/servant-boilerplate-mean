<div id="blast-page" data-ng-controller="BlastController" data-ng-init="initialize()">

    <p id="menu-bar" class="st-font">
        <a data-ui-sref="servants">
                Servants
            </a>
        <a class="active">
                Blast
            </a>
        <a data-ui-sref="menu({ servantID: s.user.servants[servant_index].servant_id })">
                Menu
            </a>
        <a data-ui-sref="number({ servantID: s.user.servants[servant_index].servant_id })">
                Number
            </a>
        <a data-ui-sref="plan({ servantID: s.user.servants[servant_index].servant_id })">
                Plan
            </a>
        <a href="/logout">
                Logout
            </a>
    </p>


    <!-- Tiny Texts -->
    <div class="page-container st-animate-zoom-in">
        <i class="fa fa-question-circle help-icon st-red st-animate-blink"></i>
        <p class="st-centered">
            <img class="servant-image" data-ng-src="https://d2d0226i04jal.cloudfront.net/images/servants/{{ s.user.servants[servant_index].personality.toLowerCase() }}.svg">
        </p>
        <p class="st-centered st-font st-red">{{s.user.servants[servant_index].master}} </p>

        <p class="st-font st-centered" style="margin-bottom:0px;">
            Text Messages Used: {{ s.user.servants[servant_index].sms_sent }} /
            <span class="st-font" data-ng-show="s.user.servants[servant_index].servant_pay_subscription_plan_id === 'plan1'">500</span>
            <span class="st-font" data-ng-show="s.user.servants[servant_index].servant_pay_subscription_plan_id === 'plan2'">1000</span>
            <span class="st-font" data-ng-show="s.user.servants[servant_index].servant_pay_subscription_plan_id === 'plan3'">1500</span>
            <span class="st-font" data-ng-show="s.user.servants[servant_index].servant_pay_subscription_plan_id === 'plan4'">2000</span>
            <span class="st-font" data-ng-show="s.user.servants[servant_index].servant_pay_subscription_plan_id === 'plan5'">2500</span>
        </p>

        <hr style="margin: 10px auto 20px auto;width:75%">

        <div data-ng-show="view === 'tinytext'">

            <p class="st-font st-centered" style="margin:0px 0px 5px 0px;">Pick A Tiny Text To Blast:</p>

            <div id="tiny-text-container">
                <div class="st-archetype-container" data-ng-repeat="tiny_text in tinytexts" style="margin:0px auto 10px auto">
                    <div class="st-archetype">
                        <p>{{ tiny_text.body }}</p>
                        <div class="tiny-text-options">
                            <button class="st-btn-red" data-ng-click="selectTinyText(tiny_text)">
                                <i class="fa fa-rocket"></i> Blast
                            </button>
                        </div>
                    </div>
                </div>
                <p class="st-centered st-font" style="margin:20px 0px;opacity:0.5" data-ng-show="!more_results && tinytexts.length">
                    No More Tiny Texts
                </p>
                <p class="st-centered st-font st-animate-blink" style="margin:20px 0px;" data-ng-show="loading_infinitescroll">
                    Loading Tiny Texts...
                </p>
                <!-- No Tiny Texts -->
                <p class="st-centered st-font" style="margin:20px 0px;" data-ng-show="!tinytexts.length">
                    You have no Tiny Texts on this Servant. Go to your
                    <a class="st-link" href="https://www.servant.co" target="_blank">Servant Dashboard</a> to make some, then refresh this page.
                </p>
            </div>
        </div>

        <!-- Schedule -->
        <div data-ng-show="view === 'schedule'">
            <div class="st-archetype-container" style="width:75%;margin:25px auto;">
                <div class="st-archetype">
                    {{ tinytext.body }}
                </div>
            </div>
            </p>
            <p class="st-font st-label" data-ng-show="blast_date">Blast Date:</p>
            <p class="st-font st-centered st-red" data-ng-show="blast_date" style="font-size:14px;margin-bottom:10px;">
                {{ blast_date.format('dddd, MMMM DD YYYY @ h:mm a')}}
            </p>
            <p class="st-font st-label" data-ng-show="blast_date" style="font-size:10px;margin-bottom:15px;">
                <span>Adust Day:</span>
                <i class='fa fa-chevron-up st-link' data-ng-click="adjustDate('days', 'up')" style="margin-left:8px;font-size:12px;"></i>
                <i class='fa fa-chevron-down st-link' data-ng-click="adjustDate('days', 'down')" style="margin-left:4px;font-size:12px;"></i>
                <span style="margin-left:15px;">Adust Hour:</span>
                <i class='fa fa-chevron-up st-link' data-ng-click="adjustDate('hours', 'up')" style="margin-left:8px;font-size:12px;"></i>
                <i class='fa fa-chevron-down st-link' data-ng-click="adjustDate('hours', 'down')" style="margin-left:4px;font-size:12px;"></i>
            </p>

            <p class="st-centered" data-ng-show="blast_date" style="margin-top:25px;">
                <button class="st-btn-red st-btn-lg" data-ng-click="scheduleTask()" data-ng-hide="scheduling">
                    <i class="fa fa-rocket"></i> Schedule Blast
                </button>
                <button class="st-btn-red st-btn-lg st-btn-disabled" data-ng-show="scheduling" disabled>
                    <i class="fa fa-spinner fa-spin"></i> Scheduling...
                </button>
            </p>

            <hr style="margin: 30px auto 20px auto;width:75%">

            <p class="st-centered st-font st-link" data-ng-click="tinytext=null;view='tinytext'" style="margin-top:10px;">
                <i class="fa fa-chevron-left" style="margin-right:7px;"></i> Select A Different Tiny Text
            </p>
        </div>


        <!-- Success -->
        <div class="st-animate-zoom-in" data-ng-show="view === 'scheduled'">

            <p class="st-font st-centered" style="margin-bottom:10px;margin-top:25px;font-size:26px;">Success!</p>
            <p class="st-font st-centered" style="margin-bottom:5px;">This Text Blast Has Been Scheduled For:</p>
            <p class="st-font st-centered st-red" style="font-size:14px;">{{ scheduled_time.format('dddd, MMMM DD YYYY @ h:mm a') }}</p>

            <div class="st-archetype-container" style="width:75%;margin:5px auto 40px auto;">
                <div class="st-archetype">
                    {{ tinytext.body }}
                </div>
            </div>

            <hr style="margin: 30px auto 20px auto;width:75%">

            <p class="st-centered st-font st-link st-animate-blink" data-ng-click="tinytext=null;view='tinytext';scheduled_time=null;" style="margin-top:10px;">
                <i class="fa fa-chevron-left" style="margin-right:7px;"></i> Schedule Another Text Blast
            </p>
        </div>

    </div>
</div>